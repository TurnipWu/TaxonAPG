plant_names <- c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ")
get_taxon <- function(name){
# 定义一个函数来提取和清洁属名
extract_genus <- function(name) {
# 删除字符串前后多余的空格
cleaned_name <- stringr::str_trim(name)
# 分割字符串，提取属名
genus <- stringr::str_split(cleaned_name, " ")[[1]][1]
return(genus)
}
genus_list <- name %>% purrr::map_dfc(extract_genus)
return(genus_list)
}
get_taxon(plant_names)
library(tidyverse)
get_taxon <- function(name) {
# 定义一个函数来提取和清洁属名
extract_genus <- function(name) {
# 删除字符串前后多余的空格
cleaned_name <- stringr::str_trim(name)
# 分割字符串，提取属名
genus <- stringr::str_split(cleaned_name, " ")[[1]][1]
return(genus)
}
# 使用map_dfc创建一个tibble，列名为"genus"
genus_list <- name %>% purrr::map_dfc(extract_genus, .id = "species_id")
return(genus_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ")
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
print(taxon_tibble)
extract_genus <- function(name) {
# 删除字符串前后多余的空格
cleaned_name <- stringr::str_trim(name)
# 分割字符串，提取属名
genus <- stringr::str_split(cleaned_name, " ")[[1]][1]
return(genus)
}
extract_genus(plant_names)
map(plant_names,extract_genus)
map_dbl(plant_names,extract_genus)
map_dfr(plant_names,extract_genus)
map_df(plant_names,extract_genus)
map_vec(plant_names,extract_genus)
tibble("a"=map_vec(plant_names,extract_genus))
get_taxon <- function(name) {
# 定义一个函数来提取和清洁属名
extract_genus <- function(name) {
# 删除字符串前后多余的空格
cleaned_name <- stringr::str_trim(name)
# 分割字符串，提取属名
genus <- stringr::str_split(cleaned_name, " ")[[1]][1]
return(genus)
}
# 使用map_dfc创建一个tibble，列名为"genus"
genus_list <- name %>% purrr::map_vec(extract_genus)
return(genus_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ")
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
print(taxon_tibble)
APG_taxonomy <- read.csv("plant_genus_list.csv")
APG_taxonomy
head(APG_taxonomy)
get_taxon <- function(name) {
# 定义一个函数来提取和清洁属名
extract_genus <- function(name) {
# 删除字符串前后多余的空格
cleaned_name <- stringr::str_trim(name)
# 分割字符串，提取属名
genus <- stringr::str_split(cleaned_name, " ")[[1]][1]
return(genus)
}
# 使用map_dfc创建一个tibble，列名为"genus"
genus_list <- purrr::map_vec(name, extract_genus)
APG_taxonomy <- read.csv("plant_genus_list.csv")
genus_family_list <- tibble(
"species" = name,
"genus" = genus_list
)|>left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ")
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
print(taxon_tibble)
plant_names <-tibble("a"= c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
plant_names
plant_names |>map(str_trim)
plant_names |>map_vec(str_trim)
plant_names |>map_dfr(str_trim)
plant_names |>map_dfr(str_trim)|>mutate(str_split(a, " ")[[1]][1])
plant_names |>map_dfr(str_trim)|>mutate("genus"=str_split(a, " ")[[1]][1])
plant_names |>map_dfr(str_trim)|>rowwise()|>mutate("genus"=str_split(a, " ")[[1]][1])
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
plant_names
get_taxon <- function(name) {
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=name[,1])
genus_family_list <- name|>
map_dfr(str_trim)|>
rowwise()|>
mutate("genus"=str_split(a, " ")[[1]][1])|>
left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
tibble("species"=plant_names[,1])
tibble("species"=unlist(plant_names[,1]))
?rowwise
?map_dfr
?mutate
left_join
?left_join
get_taxon <- function(name) {
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble(unlist("species"=name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(a, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
print(taxon_tibble)
tibble(unlist("species"=plant_names[,1]))
get_taxon <- function(name) {
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(a, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
tibble("species"=unlist(plant_names[,1]))
tibble("species"=unlist(plant_names[,1]))|>map_dfr(str_trim)
tibble("species"=unlist(plant_names[,1]))|>map_dfr(str_trim)|>rowwise()|>
dplyr::mutate("genus"=str_split(a, " ")[[1]][1])
get_taxon <- function(name) {
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
print(taxon_tibble)
str_split(plant_names,"")
plant_names <- c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ")
str_split(plant_names , " ")
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
print(taxon_tibble)
library(plantlist)
plantlist::TPL(plant_names)
plant_names <- c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ")
plantlist::TPL(plant_names)
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
plant_names
?require
require(tidyverse)
require(ti2dyverse)
require("tidyverse")
require("tidyvaerse")
if (system.file(package='tidyverse')==""){print("A")}
if (system.file(package='tidyverse')!=""){print("A")}
if (system.file(package='tidyverse')==""){stop("请install一下tidyverse")}
if (system.file(package='tidayverse')==""){stop("请install一下tidyverse")}
if (system.file(package='tidyverse')==""){stop("Please install the tidyverse first.")}
if (system.file(package='tidyverase')==""){stop("Please install the tidyverse first.")}
get_taxon <- function(name) {
if (system.file(package='tidyverse')==""){stop("Please install the tidyverse first.")}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
taxon_tibble <- get_taxon(plant_names)
print(taxon_tibble)
plant_names2 <- c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ")
library(tictoc)
tic()
taxon_tibble <- get_taxon(plant_names)
toc()
plant_names2 <- c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ")
tic()
plantlist::TPL(plant_names2)
toc()
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
tic()
taxon_tibble <- get_taxon(plant_names)
toc()
taxon_tibble
plant_names2 <- c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ")
tic()
plantlist::TPL(plant_names2)
toc()
tic()
taxon_tibble <- get_taxon(plant_names)
toc()
taxon_tibble
!requireNamespace("tidyverse", quietly = TRUE)
!requireNamespace("tidyverse")
!require("tidyverse")
require("tidyverse")
get_taxon <- function(name) {
if (require("tidyvaerse")){stop("Please install the tidyverse first.")}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
toc()
require("tidyverse")
get_taxon <- function(name) {
if (requireNamespace("tidyverse")){stop("Please install the tidyverse first.")}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
get_taxon <- function(name) {
if (!requireNamespace("tidyverse")){stop("Please install the tidyverse first.")}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
get_taxon <- function(name) {
if (!requireNamespace("tidyvaerse")){stop("Please install the tidyverse first.")}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
get_taxon <- function(name) {
if (!require("tidyvaerse",quietly = T)){stop("Please install the tidyverse first.")}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
get_taxon <- function(name) {
if (!require("tidyverse",quietly = T)){stop("Please install the tidyverse first.")}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
plant_names <- tibble("A"=c("Quercus robur", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  ", "Pinus sylvestris ", "Acer saccharum", "Malus domestica", "Robinia pseudoacacia  "))
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
toc()
taxon_tibble
class(name)
class(plant_names)
class(plant_names2)
class(plant_names2)[1]
class(plant_names)[1]
get_taxon <- function(name) {
if (!require("tidyverse",quietly = T)){stop("Please install the tidyverse first.")}
if (class(name)[1]!="tbl_df"){name <- as.tibble(name)}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 创建一个包含植物拉丁名的向量
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
taxon_tibble
get_taxon <- function(name) {
if (!require("tidyverse",quietly = T)){stop("Please install the tidyverse first.")}
if (class(name)[1]!="tbl_df"){name <- as.tibble(name)
stop("Ple")}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
get_taxon <- function(name) {
if (!require("tidyverse",quietly = T)){stop("Please install the tidyverse first.")}
if (class(name)[1]=="tbl_df"){name <- as.tibble(name)
stop("Ple")}
APG_taxonomy <- read.csv("plant_genus_list.csv")
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
if (class(plant_names2)[1]=="tbl_df"){name <- as_tibble(plant_names2)}
plant_names2
name
if (class(plant_names2)[1]!="tbl_df"){name <- as_tibble(plant_names2)}
name
get_taxon <- function(name) {
if (!require("tidyverse",quietly = T)){stop("Please install the tidyverse package first.")}
if (class(name)[1]!="tbl_df"){name <- as_tibble(name)}
# APG_taxonomy <- read.csv("plant_genus_list.csv")后面改
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names)
taxon_tibble
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names2)
taxon_tibble
?as_tibble
get_taxon <- function(name) {
if (!require("tidyverse",quietly = T)){stop("Please install the tidyverse package first.")}
if (class(name)[1]!="tbl_df"){name <- tibble::as_tibble(name)}
# APG_taxonomy <- read.csv("plant_genus_list.csv")后面改
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names2)
taxon_tibble
?ungroup
library(tidyverse)
get_taxon <- function(name) {
if (!require("tidyverse",quietly = T)){stop("Please install the tidyverse package first.")}
if (class(name)[1]!="tbl_df"){name <- tibble::as_tibble(name)}
# APG_taxonomy <- read.csv("plant_genus_list.csv")后面改
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_trim)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::ungroup()|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names2)
toc()
taxon_tibble
tic()
taxon_tibble <- get_taxon(plant_names2)
toc()
install.packages("usethis")
library(usethis)
create_package("TaxonAPG",open=F)
?str_squish
get_taxon <- function(name) {
if (!require("tidyverse",quietly = T)){stop("Please install the tidyverse package first.")}
if (class(name)[1]!="tbl_df"){name <- tibble::as_tibble(name)}
# APG_taxonomy <- read.csv("plant_genus_list.csv")后面改
name <- tibble("species"=unlist(name[,1]))
genus_family_list <- name|>
purrr::map_dfr(str_squish)|>
dplyr::rowwise()|>
dplyr::mutate("genus"=str_split(species, " ")[[1]][1])|>
dplyr::ungroup()|>
dplyr::left_join(APG_taxonomy,by="genus")
return(genus_family_list)
}
# 调用函数并打印结果
tic()
taxon_tibble <- get_taxon(plant_names2)
taxon_tibble
use_data(APG_taxonomy)
setwd('D:/Turnip/Work/Ecology/代码/TaxonAPG')
use_data(APG_taxonomy)
data("APG_taxonomy")
View(APG_taxonomy)
library(TaxonAPG)
devtools::document()
devtools::build()
library(TaxonAPG)
?TaxonAPG
?get_taxon
devtools::document()
devtools::build()
library(TaxonAPG)
?get_taxon
devtools::document()
devtools::build()
library(TaxonAPG)
?get_taxon
devtools::document()
devtools::document()
devtools::build()
library(TaxonAPG)
get_taxon("Nymphaea ")
devtools::document()
devtools::build()
get_taxon("Nymphaea")
devtools::document()
devtools::build()
get_taxon("Nymphaea")
